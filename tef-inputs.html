<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../core-ajax/core-ajax.html">
<link rel="import" href="../core-signals/core-signals.html">

<link rel="stylesheet" href="../icons/icons.css">
<polymer-element name="tef-input" attributes="placeholder multiline icon value label tefformrow small large validation">
    <template>
        <core-signals on-core-signal-new-brand="{{newBrand}}"></core-signals>
        <template if="{{brand}}">
            <core-ajax auto url="{{resolveCSSPath(brand)}}" response="{{resp}}"></core-ajax>
            <style>{{resp}}</style>
        </template>
        <link rel="stylesheet" href="../icons/icons.css">
        <template if="{{label}}">
            <label>{{label}}</label>
        </template>
        <template if="{{!multiline && !icon && !validation}}">
                <input id="input" class="tef-input {{tefformrow ? ' tef-form-row' : ''}} {{small ? ' small' : ''}} {{large ? ' large' : ''}}" placeholder={{placeholder}} value={{value}}>
        </template>
        <template if="{{multiline}}">
            <textarea id="input" class="tef-input {{tefformrow ? ' tef-form-row' : ''}} {{small ? ' small' : ''}} {{large ? ' large' : ''}}" placeholder={{placeholder}} value={{value}}>
            </textarea>
        </template>
        <template if="{{icon}}">
            <div class="tef-input-icon {{tefformrow ? ' tef-form-row' : ''}} ">
                <input class="tef-input {{small ? ' small' : ''}} {{large ? ' large' : ''}}" placeholder={{placeholder}} value={{value}}>
                <i data-icon={{icon}}></i>
            </div>
        </template>
        <template if="{{validation!=false}}">
             <div class="tef-form-row tef-{{validation}}"> 
                 <input class="tef-input {{small ? ' small' : ''}} {{large ? ' large' : ''}}" placeholder={{placeholder}} value={{value}} > 
                 <div class="tef-message"> 
                     </content><content>
                 </div> 
            </div>
        </template>
    </template>
	<script>
        Polymer({
            brand : "",
            publish: {
                label: {
                    value: "",
                    reflect: true
                },
                multiline: {
                    value: false,
                    reflect: true
                },
                icon: {
                    value: "",
                    reflect: true
                },
                tefformrow: {
                    value: false,
                    reflect: true
                },
                small: {
                    value: false,
                    reflect: true
                },
                large: {
                    value: false,
                    reflect: true
                },
                validation: {
                    value: "",
                    reflect: true
                }
            },
            newBrand: function(e, detail, sender) {
                if (detail) {
                    this.brand = detail;
                }
            },
            resolveCSSPath: function(value) {
                return this.resolvePath('../inputs/css/inputs.'+ this.brand + '.min.css');
            }
        });				
	</script>	
</polymer-element>
